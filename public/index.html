<script type="module">
  // Firebase App (config)
  const firebaseConfig = {
    apiKey: "AIzaSyCgTUoaHiiwtrs9FnVoiAi5-3qmMWuih80",
    authDomain: "gpu-coban.firebaseapp.com",
    projectId: "gpu-coban",
    storageBucket: "gpu-coban.firebasestorage.app",
    messagingSenderId: "231403963193",
    appId: "1:231403963193:web:616908deb40cfe29c09ee8"
  };

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
  import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

  const app = initializeApp(firebaseConfig);
  const db  = getFirestore(app);

  const tbody = document.getElementById("rigs-table-body");

  // Firestore'dan rigs koleksiyonunu canlÄ± dinle
  onSnapshot(collection(db, "rigs"), (rigSnap) => {
    tbody.innerHTML = "";
    rigSnap.forEach(rigDoc => {
      const rig = { id: rigDoc.id, ...rigDoc.data() };

      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${rig.id}</td>
        <td>${rig.name || "-"}</td>
        <td>${rig.status || "-"}</td>
        <td data-gpu-count>-</td>
        <td data-total-hash>-</td>
      `;
      tbody.appendChild(tr);
    });
  });
</script>
